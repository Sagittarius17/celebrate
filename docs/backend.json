
{
  "entities": {
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Information about a registered user of the application.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The unique identifier for the user (Firebase Auth UID)."
        },
        "email": {
          "type": "string",
          "description": "The user's registered email address."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp when the user account was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp when the user profile was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "uid",
        "email",
        "createdAt"
      ]
    },
    "CelebrationPage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "CelebrationPage",
      "type": "object",
      "description": "Represents a single interactive celebration landing page, containing all events and media.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the CelebrationPage entity."
        },
        "title": {
          "type": "string",
          "description": "The main title displayed prominently on the page (e.g., 'Happy Anniversary!')."
        },
        "recipientName": {
          "type": "string",
          "description": "The full name of the person or group being celebrated."
        },
        "creatorName": {
          "type": "string",
          "description": "The name of the user who created this celebration page."
        },
        "occasion": {
          "type": "string",
          "description": "The type of celebration (e.g., Birthday, Anniversary, Graduation, Wedding)."
        },
        "accessCode": {
          "type": "string",
          "description": "A secret code required to securely access this particular page."
        },
        "finalQuote": {
          "type": "string",
          "description": "A final message or quote shown at the end of the timeline."
        },
        "layout": {
          "type": "string",
          "description": "The visual layout style for the memories.",
          "enum": ["Timeline", "Carousel", "Grid"],
          "default": "Timeline"
        },
        "font": {
          "type": "string",
          "description": "The font family selected for the celebration page.",
          "enum": ["Playfair Display", "PT Sans", "Montserrat", "Lora", "Quicksand", "Merriweather", "Oswald", "Dancing Script", "Caveat", "Pacifico", "Lobster", "Cinzel", "Comfortaa", "Great Vibes", "Sacramento"]
        },
        "spotifyTrackId": {
          "type": "string",
          "description": "The Spotify Track ID to play on the page."
        },
        "spotifyTrackDurationMs": {
          "type": "number",
          "description": "The duration of the selected Spotify track in milliseconds."
        },
        "voiceNoteDataUri": {
          "type": "string",
          "description": "A Base64 data URI of a recorded voice message."
        },
        "voiceNoteDuration": {
          "type": "number",
          "description": "The duration of the voice note in seconds."
        },
        "ownerId": {
          "type": "string",
          "description": "UID of the creator."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the celebration page was initially created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when the celebration page was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "title",
        "recipientName",
        "creatorName",
        "occasion",
        "accessCode",
        "ownerId",
        "createdAt"
      ]
    },
    "BirthdayEvent": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "BirthdayEvent",
      "type": "object",
      "description": "Represents a single chronological event or memory to be displayed as an interactive card on the timeline.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the BirthdayEvent entity."
        },
        "celebrationPageId": {
          "type": "string",
          "description": "Reference to the CelebrationPage this event belongs to."
        },
        "eventDate": {
          "type": "string",
          "description": "The specific date associated with this event.",
          "format": "date"
        },
        "title": {
          "type": "string",
          "description": "A concise title for the event card."
        },
        "titleFont": {
          "type": "string",
          "description": "Custom font for this memory's title."
        },
        "message": {
          "type": "string",
          "description": "The celebratory message or a memorable quote associated with this event."
        },
        "messageFont": {
          "type": "string",
          "description": "Custom font for this memory's message."
        },
        "order": {
          "type": "number",
          "description": "An integer representing the display order."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL for the image associated with this event."
        },
        "ownerId": {
          "type": "string",
          "description": "UID of the creator."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when this event record was created.",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "description": "Timestamp indicating when this event record was last updated.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "celebrationPageId",
        "eventDate",
        "title",
        "message",
        "order",
        "ownerId",
        "createdAt"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/backend/entities/UserProfile" },
      "description": "User profile documents storing basic account information."
    },
    "/celebrationPages/{celebrationPageId}": {
      "schema": { "$ref": "#/backend/entities/CelebrationPage" },
      "description": "Publicly accessible celebration pages (via code)."
    },
    "/celebrationPages/{celebrationPageId}/birthdayEvents/{birthdayEventId}": {
      "schema": { "$ref": "#/backend/entities/BirthdayEvent" },
      "description": "Events within a celebration page."
    }
  }
}
